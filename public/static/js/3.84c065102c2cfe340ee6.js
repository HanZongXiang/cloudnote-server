webpackJsonp([3],{AZDT:function(t,a){},efq8:function(t,a){},fquS:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={name:"detail",data:function(){return{username:"",avatar:"",content:{},formatTime:"",formData:{content:""},commentData:[],page:1,total:0,isCollect:!1}},components:{},methods:{getDetail:function(){var t=this;this.loading=!0;var a=this.$route.params.id;this.$axios.get("/article/"+a).then(function(a){t.loading=!1,t.content=a.data,t.username=a.data.author.username,t.avatar=a.data.author.avatar;var e=new Date(a.data.createdTime),n=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();t.formatTime=n+"-0"+s+"-"+i}).catch(function(a){t.loading=!1})},addComment:function(){var t=this,a=this.$route.params.id;this.$axios.post("/comment",{content:this.formData.content,articleId:a}).then(function(a){200==a.code&&(t.formData.content="",t.$message.success(a.msg),t.getComments())})},getComments:function(){var t=this,a=this.$route.params.id;this.$axios.get("/comment/"+a,{page:this.page}).then(function(a){200==a.code&&(t.commentData=a.data,t.total=a.total)}).catch(function(a){t.$message.error("请求错误")})},pageChange:function(t){this.page=t,this.getComments()},collectNote:function(){this.isCollect?this.isCollect=!1:this.isCollect=!0}},created:function(){this.getDetail(),this.getComments()}},s={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen",value:t.loading,expression:"loading",modifiers:{fullscreen:!0}}],staticClass:"detail",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[e("div",{staticClass:"article-msg clearfix"},[e("div",{staticClass:"img-wrap fl"},[e("img",{staticClass:"img",attrs:{src:t.avatar}})]),t._v(" "),e("div",{staticClass:"author-msg fl"},[e("div",{staticClass:"author-name"},[t._v("\n        "+t._s(t.username)+"\n      ")]),t._v(" "),e("div",{staticClass:"date"},[e("span",{staticClass:"format-date"},[t._v("\n          "+t._s(t.formatTime)+"\n        ")]),t._v(" "),e("span",[t._v("\n          阅读 "+t._s(t.content.readnums)+"\n        ")])])])]),t._v(" "),e("h2",{staticClass:"title"},[t._v(t._s(t.content.title))]),t._v(" "),e("div",{staticClass:"content",domProps:{innerHTML:t._s(t.content.content)}}),t._v(" "),e("div",{staticClass:"side-menu"},[e("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"danger",icon:t.isCollect?"el-icon-star-on":"el-icon-star-off",circle:""},on:{click:t.collectNote}}),t._v(" "),e("el-badge",{staticClass:"item",attrs:{value:t.total,max:99}},[e("el-button",{attrs:{icon:"el-icon-message",circle:"",type:"primary"}})],1)],1),t._v(" "),e("div",{staticClass:"card-wrap w1170"},[e("div",{staticClass:"comment-wrap"},[e("img",{staticClass:"li-img",attrs:{src:this.$store.state.userInfo.avatar}}),t._v(" "),e("el-input",{staticStyle:{width:"775px","margin-left":"15px"},attrs:{placeholder:"输入评论"},nativeOn:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.addComment(a):null}},model:{value:t.formData.content,callback:function(a){t.$set(t.formData,"content",a)},expression:"formData.content"}}),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.addComment}},[t._v("评论")])],1),t._v(" "),t.commentData.length>0?e("el-card",{staticStyle:{width:"900px","margin-top":"25px","margin-left":"90px"}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("评论列表")]),t._v(" "),e("ul",{staticClass:"list-wrap"},t._l(t.commentData,function(a,n){return e("li",{key:n},[e("img",{staticClass:"li-img",attrs:{src:a.author.avatar}}),t._v(" "),e("span",[t._v(t._s(a.author.username))]),t._v(" "),e("p",[t._v(t._s(a.content))])])})),t._v(" "),e("div",{staticClass:"page-wrap"},[e("el-pagination",{attrs:{background:"","page-size":10,layout:"prev, pager, next",total:t.total},on:{"current-change":t.pageChange}})],1)]):t._e()],1)])},staticRenderFns:[]};var i=e("VU/8")(n,s,!1,function(t){e("efq8"),e("AZDT")},"data-v-151b5b90",null);a.default=i.exports}});
//# sourceMappingURL=3.84c065102c2cfe340ee6.js.map